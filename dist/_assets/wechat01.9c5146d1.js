let e=document.createElement("style");e.innerHTML=".chat-box[data-v-1eb02914]{margin:0 auto;background:#fafafa;position:absolute;height:100%;width:100%;max-width:700px}.chat-box header[data-v-1eb02914]{position:fixed;width:100%;height:3rem;background:#409eff;max-width:700px;display:flex;justify-content:center;align-items:center;font-weight:700;color:#fff;font-size:1rem}.chat-box .msg-box[data-v-1eb02914]{position:absolute;height:calc(100% - 6.5rem);width:100%;margin-top:3rem;overflow-y:scroll}.chat-box .msg-box .msg[data-v-1eb02914]{width:95%;min-height:2.5rem;margin:1rem .5rem;position:relative;display:flex;justify-content:flex-start!important}.chat-box .msg-box .msg .user-head[data-v-1eb02914]{min-width:2.5rem;width:2.5rem;height:2.5rem;border-radius:50%;background:#f1f1f1;display:flex;justify-content:center;align-items:center}.chat-box .msg-box .msg .user-head .head[data-v-1eb02914]{width:1.2rem;height:1.2rem}.chat-box .msg-box .msg .user-msg[data-v-1eb02914]{width:80%;word-break:break-all;position:relative;z-index:5}.chat-box .msg-box .msg .user-msg span[data-v-1eb02914]{display:inline-block;padding:.5rem .7rem;border-radius:.5rem;margin-top:.2rem;font-size:.88rem}.chat-box .msg-box .msg .user-msg .left[data-v-1eb02914]{background:#fff;animation:.5s both toLeft-1eb02914}.chat-box .msg-box .msg .user-msg .right[data-v-1eb02914]{background:#53a8ff;color:#fff;animation:.5s both toright-1eb02914}@keyframes toLeft-1eb02914{0%{opacity:0;transform:translateX(-10px)}100%{opacity:1;transform:translateX(0)}}@keyframes toright-1eb02914{0%{opacity:0;transform:translateX(10px)}100%{opacity:1;transform:translateX(0)}}.chat-box .input-box[data-v-1eb02914]{padding:0 .5rem;position:absolute;bottom:0;width:100%;height:3.5rem;background:#fafafa;box-shadow:0 0 5px #ccc;display:flex;justify-content:space-between;align-items:center}.chat-box .input-box input[data-v-1eb02914]{height:2.3rem;display:inline-block;width:100%;padding:.5rem;border:none;border-radius:.2rem;font-size:.88rem}.chat-box .input-box .btn[data-v-1eb02914]{height:2.3rem;min-width:4rem;background:#e0e0e0;padding:.5rem;font-size:.88rem;color:#fff;text-align:center;border-radius:.2rem;margin-left:.5rem;transition:.5s}.chat-box .input-box .btn-active[data-v-1eb02914]{background:#409eff}",document.head.appendChild(e);import{p as t,q as s,c as a,d as o,e as n,f as r,F as i,m as d,l,v as c,D as m,B as b,s as g}from"./index.1d5dfa01.js";var u={data:()=>({ws:null,count:0,userId:null,list:[],contentText:""}),created(){this.getUserID()},mounted(){this.initWebSocket()},methods:{getUserID(){let e=(new Date).getTime();this.userId=e},getUserHead(e,t){let s=String(e);return"bck"==t?Number(s.substring(s.length-3)):"polygon"==t?Number(s.substring(s.length-2)):"rotate"==t?Number(s.substring(s.length-3)):void 0},scrollBottm(){let e=this.$refs["msg-box"];e.scrollTop=e.scrollHeight},sendText(){let e=this;if(e.$refs.sendMsg.focus(),!e.contentText)return;let t={userId:e.userId,msg:e.contentText};e.ws.send(JSON.stringify(t)),e.contentText="",setTimeout((()=>{e.scrollBottm()}),500)},initWebSocket(){let e=this;if(window.WebSocket){let t=new WebSocket("ws://10.2.23.234:8181");e.ws=t,t.onopen=function(e){console.log("服务器连接成功")},t.onclose=function(e){console.log("服务器连接关闭")},t.onerror=function(){console.log("服务器连接出错")},t.onmessage=function(t){let s=JSON.parse(t.data);"userCount"==s.funName?(e.count=s.users,e.list=s.chat,console.log(s.chat)):e.list=[...e.list,{userId:s.userId,content:s.msg}]}}}}};t("data-v-1eb02914");const h={class:"chat-box"},f={class:"msg-box",ref:"msg-box"},x={class:"user-head"},p={class:"user-msg"},v={class:"input-box"};s(),u.render=function(e,t,s,u,y,w){return a(),o("div",h,[n("header",null,"聊天室人数："+r(y.count),1),n("div",f,[(a(!0),o(i,null,d(y.list,((e,t)=>(a(),o("div",{key:t,class:"msg",style:g(e.userId==y.userId?"flex-direction:row-reverse":"")},[n("div",x,[n("div",{class:"head",style:g(` background: hsl(${w.getUserHead(e.userId,"bck")}, 88%, 62%); clip-path:polygon(${w.getUserHead(e.userId,"polygon")}% 0,100% 100%,0% 100%); transform: rotate(${w.getUserHead(e.userId,"rotate")}deg)`)},null,4)]),n("div",p,[n("span",{style:g(e.userId==y.userId?" float: right;":""),class:b(e.userId==y.userId?"right":"left")},r(e.content),7)])],4)))),128))],512),n("div",v,[l(n("input",{type:"text",ref:"sendMsg","onUpdate:modelValue":t[0]||(t[0]=e=>y.contentText=e),onKeyup:t[1]||(t[1]=m((e=>w.sendText()),["enter"]))},null,544),[[c,y.contentText]]),n("div",{class:b(["btn",{"btn-active":y.contentText}]),onClick:t[2]||(t[2]=e=>w.sendText())},"发送",2)])])},u.__scopeId="data-v-1eb02914";export{u as default};
